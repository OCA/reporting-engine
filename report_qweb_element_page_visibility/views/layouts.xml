<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <template id="minimal_layout" inherit_id="report.minimal_layout">
            <xpath expr="//body" position="attributes">
                <attribute name="onload">subst_wrapper();</attribute>
            </xpath>
            <xpath expr="//t[@t-if='subst is True']" position="after">
                <script>
                    function subst_wrapper() {
                        if (typeof subst === "function") {
                            subst();
                        }
                        var vars = {};
                        var x = document.location.search.substring(1).split('&amp;amp;');
                        for (var i in x) {
                            var z = x[i].split('=', 2);
                            vars[z[0]] = unescape(z[1]);
                        }
                        var operations = {
                            'not-first-page': function (elt) {
                                elt.style.visibility = (vars.page === vars.frompage) ?
                                "hidden" : "visible";
                            },
                            'not-last-page': function (elt) {
                                elt.style.visibility = (vars.page === vars.topage) ?
                                "hidden" : "visible";
                            },
                            'first-page': function (elt) {
                                elt.style.visibility = (vars.page === vars.frompage) ?
                                "visible" : "hidden";
                            },
                            'last-page': function (elt) {
                                elt.style.visibility = (vars.page === vars.topage) ?
                                "visible" : "hidden";
                            },
                        };
                        for (var _class in operations) {
                            var y = document.getElementsByClassName(_class);
                            for (var j=0; j&lt;y.length; ++j)
                            operations[_class](y[j]);
                        }
                    }
                </script>
            </xpath>
        </template>

    </data>
</openerp>
